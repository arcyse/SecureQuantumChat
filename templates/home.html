{% extends "base.html" %}

{% block content %}
<div class="gif-overlay">
</div>
<div class="container">
    <div class="hero-section">
        <h1 class="title">
            <span class="text-transform">
                <span class="text-original">SchrÃ¶dinger's</span>
                <span class="text-hover">Super Secure</span>
            </span>
            <br>
            <span class="gif-underline">Quantum</span> Chat
        </h1>
        <p class="tagline">Encrypted conversations powered by quantum key distribution</p>
        <p class="subtitle">Where the act of eavesdropping changes everything</p>
    </div>

    <!-- How it works section -->
    <div class="how-it-works">
        <h2>How It Works</h2>
        <div class="steps-grid">
            <div class="step">
                <span class="step-number">1</span>
                <h3>Create or Join</h3>
                <p>Start a new room or enter a friend's 4-character code</p>
            </div>
            <div class="step">
                <span class="step-number">2</span>
                <h3>QKD Handshake</h3>
                <p>BB84 protocol generates your shared encryption key</p>
            </div>
            <div class="step">
                <span class="step-number">3</span>
                <h3>Chat Securely</h3>
                <p>Messages encrypted with your quantum-derived key</p>
            </div>
        </div>
        <p class="pro-tip"><strong>Pro tip:</strong> Click "QKD Debug" in the chat room to see the quantum mechanics in action</p>
    </div>

    <div class="landing-page">
        <!-- Form for joining a room -->
        <div class="form-card">
            <h2 class="form-title">Join a Room</h2>
            <form method="post" class="form-container" id="join-room-form"> 
                <div class="input-group">
                    <label for="name">Username</label>
                    <input type="text" id="name" placeholder="Your nickname" name="name" value="{{ name }}" required/> 
                </div>
                <div class="input-group">
                    <label for="code">Room Code</label>
                    <input type="text" id="code" placeholder="ABCD" name="code" value="{{ code }}" maxlength="4" required/>
                    <small>4 characters, case-insensitive</small>
                </div>
                <button type="submit" name="join" class="primary-btn">Join Room</button>
            </form>
        </div>

        <div class="divider">
            <span>or</span>
        </div>

        <!-- Form for creating a room -->
        <div class="form-card">
            <h2 class="form-title">Create a Room</h2>
            <form method="post" class="form-container" id="create-room-form"> 
                <div class="input-group">
                    <label for="name-create">Username</label>
                    <input type="text" id="name-create" placeholder="Your nickname" name="name" value="{{ name }}" required/> 
                </div>
                <p class="form-hint">A random 4-character code will be generated for you to share</p>
                <button type="submit" name="create" class="primary-btn create-room-btn">Create Room</button>
            </form>
        </div>
    </div>

    <!-- Display error if present -->
    {% if error %}
    <div class="error-banner">
        <span class="error-icon">âš </span>
        <span>{{ error }}</span>
    </div>
    {% endif %}

    <!-- Footer -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <div class="logo-section">
                    <img src="../static/images/sqc-logo.png" alt="sqc-cat" class="footer-logo">
                    <h1>Secure Quantum Chat</h1>
                </div>
                <p class="copyright">
                    <span class="copyleft">â’¸</span> Copyleft 2024 <br>
                    Made in Bengaluru with ðŸ’–
                </p>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h2>Company</h2>
                    <a href="javascript:void(0)">Blog</a>
                    <a href="javascript:void(0)">Pricing</a>
                    <a href="javascript:void(0)">About Us</a>
                    <a href="javascript:void(0)">Contact us</a>
                </div>
                <div class="footer-column">
                    <h2>Support</h2>
                    <a href="javascript:void(0)">Legal & Privacy</a>
                    <a href="javascript:void(0)">Status</a>
                    <a href="javascript:void(0)">Bug Report</a>
                    <a href="javascript:void(0)">Terms of service</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="easteregg-image">
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Randomize GIF for the overlay
        const gifs = [
            "../static/images/qbit.gif",
            "../static/images/duality.gif",
            "../static/images/entanglement.gif",
            "../static/images/particles.gif",
            "../static/images/slit.gif",
            "../static/images/ripple.gif",
            "../static/images/beat.gif",
            "../static/images/drop.gif",
            "../static/images/donut.gif",
            "../static/images/wave.gif",
            "../static/images/ripple.webp"
        ];

        const randomGif = gifs[Math.floor(Math.random() * gifs.length)];

        const gifImg = document.createElement('img');
        gifImg.src = randomGif;
        gifImg.alt = "BG GIF";
        gifImg.style.width = "100%";
        gifImg.style.height = "100%";
        gifImg.style.objectFit = "cover";

        document.querySelector('.gif-overlay').appendChild(gifImg);

        // Randomize image for the footer with wiggle animation
        const images = [
            { src: "../static/images/richard-feynman.png", href: "https://wikipedia.org/wiki/Richard_Feynman" },
            { src: "../static/images/albert-einstein.png", href: "https://wikipedia.org/wiki/Albert_Einstein" },
            { src: "../static/images/niels-bohr.png", href: "https://wikipedia.org/wiki/Niels_Bohr" },
            { src: "../static/images/max-planck.png", href: "https://wikipedia.org/wiki/Max_Planck" }
        ];

        const randomImage = images[Math.floor(Math.random() * images.length)];

        const anchor = document.createElement('a');
        anchor.href = randomImage.href;
        anchor.target = "_blank";
        anchor.className = "scientist-link";

        const img = document.createElement('img');
        img.src = randomImage.src;
        img.alt = "Easter Egg";
        img.className = "scientist-img";

        anchor.appendChild(img);
        document.querySelector('.easteregg-image').appendChild(anchor);
    });
</script>
{% endblock %}
